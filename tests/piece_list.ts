import { deepStrictEqual } from "assert";
import { PieceList } from "../src/index.js";

const list = new PieceList(10);

deepStrictEqual([...list.squares], [64, 64, 64, 64, 64, 64, 64, 64, 64, 64]);

list.addPiece(11);

deepStrictEqual([...list.squares], [11, 64, 64, 64, 64, 64, 64, 64, 64, 64]);
deepStrictEqual([...list.map], [
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10,  0, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
]);

list.addPiece(0);

deepStrictEqual([...list.squares], [11, 0, 64, 64, 64, 64, 64, 64, 64, 64]);
deepStrictEqual([...list.map], [
     1, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10,  0, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
]);

list.removePiece(11);

deepStrictEqual([...list.squares], [0, 64, 64, 64, 64, 64, 64, 64, 64, 64]);
deepStrictEqual([...list.map], [
     0, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
]);

list.movePiece(0, 11);

deepStrictEqual([...list.squares], [11, 64, 64, 64, 64, 64, 64, 64, 64, 64]);
deepStrictEqual([...list.map], [
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10,  0, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
    10, 10, 10, 10, 10, 10, 10, 10,
]);

console.log(`âœ… all checks passed`);
